---
phase: 01-foundation-configuration
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/context/ApiKeysContext.tsx
  - src/components/features/ApiKeyForm.tsx
  - src/App.tsx
  - src/types/api-keys.ts
  - package.json
autonomous: false

must_haves:
  truths:
    - "User can input Anthropic API key and it is saved to session storage"
    - "User can input YouTube Data API key and it is saved to session storage"
    - "API keys are masked (password input) with show/hide toggle"
    - "API keys survive page refresh within the same browser tab"
    - "API keys are cleared when the browser tab is closed"
  artifacts:
    - path: "src/context/ApiKeysContext.tsx"
      provides: "React Context provider for API keys backed by sessionStorage"
      exports: ["ApiKeysProvider", "useApiKeys"]
    - path: "src/components/features/ApiKeyForm.tsx"
      provides: "Form component for entering both API keys with masking"
      exports: ["ApiKeyForm"]
    - path: "src/types/api-keys.ts"
      provides: "TypeScript type definitions for API keys"
      exports: ["ApiKeys"]
  key_links:
    - from: "src/components/features/ApiKeyForm.tsx"
      to: "src/context/ApiKeysContext.tsx"
      via: "useApiKeys() hook"
      pattern: "useApiKeys"
    - from: "src/context/ApiKeysContext.tsx"
      to: "sessionStorage"
      via: "useEffect sync"
      pattern: "sessionStorage\\.(get|set)Item"
    - from: "src/App.tsx"
      to: "src/context/ApiKeysContext.tsx"
      via: "ApiKeysProvider wrapper"
      pattern: "ApiKeysProvider"
---

<objective>
Build API key input components with React Context and session storage, providing masked inputs for Anthropic and YouTube API keys.

Purpose: Fulfill CONF-01, CONF-02, CONF-03 — users must be able to enter, save, and mask their API keys before any API integration can happen in later phases.
Output: A working API key configuration form with session-persisted, masked inputs using shadcn/ui components.
</objective>

<execution_context>
@/Users/nathanstasin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nathanstasin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-configuration/01-RESEARCH.md
@.planning/phases/01-foundation-configuration/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create API keys type, Context provider, and form component</name>
  <files>src/types/api-keys.ts, src/context/ApiKeysContext.tsx, src/components/features/ApiKeyForm.tsx, src/App.tsx, package.json</files>
  <action>
    1. Install form dependencies:
       ```bash
       npm install react-hook-form @hookform/resolvers zod
       ```

    2. Install shadcn/ui form component:
       ```bash
       npx shadcn@latest add form
       ```

    3. Create src/types/api-keys.ts:
       ```typescript
       export interface ApiKeys {
         anthropicKey: string
         youtubeKey: string
       }
       ```

    4. Create src/context/ApiKeysContext.tsx:
       - Create ApiKeysContext with React.createContext
       - Provider reads initial state from sessionStorage (key: "api-keys")
       - useEffect syncs state changes to sessionStorage
       - Expose `keys: ApiKeys`, `setKeys: (keys: Partial<ApiKeys>) => void`, `clearKeys: () => void`, `hasKeys: boolean` (true when both keys are non-empty)
       - Export useApiKeys() custom hook with context null check
       - Export ApiKeysProvider component

    5. Create src/components/features/ApiKeyForm.tsx:
       - Use React Hook Form with Zod schema validation:
         - anthropicKey: z.string().min(1, "Anthropic API key is required")
         - youtubeKey: z.string().min(1, "YouTube API key is required")
       - Each input field uses type="password" by default for masking
       - Add eye/eye-off toggle button (lucide-react icons: Eye, EyeOff) to toggle between password and text input type for each field independently
       - Use shadcn/ui Form, FormField, FormItem, FormLabel, FormControl, FormMessage components
       - Use shadcn/ui Input, Button, Card, CardHeader, CardTitle, CardContent components
       - On submit, call setKeys() from useApiKeys() context
       - Show success state: after keys are saved, show a "Keys saved" message and a "Clear keys" button
       - When keys already exist (from sessionStorage), pre-fill form with existing values
       - Card layout with title "API Configuration" and description about session-only storage

    6. Update src/App.tsx:
       - Wrap app content with ApiKeysProvider
       - Render ApiKeyForm component as the main content
       - Layout: centered card on the page with max-w-lg

    7. Verify:
       - `npm run dev` shows the API key form
       - Enter keys, submit, refresh page — keys persist
       - Keys display as masked (dots) by default
       - Toggle reveals actual key text
  </action>
  <verify>
    Run `npm run dev` — form renders with two masked input fields.
    Run `npx tsc --noEmit` — no TypeScript errors.
    Manual: Enter keys, refresh page, keys persist. Close tab, reopen, keys are gone.
  </verify>
  <done>
    Both API key inputs render with masking, save to sessionStorage via Context, survive page refresh, and clear on tab close.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>API key configuration form with masked inputs, session storage persistence, and show/hide toggles for both Anthropic and YouTube API keys.</what-built>
  <how-to-verify>
    1. Open http://localhost:5173 in browser
    2. Verify two input fields appear: "Anthropic API Key" and "YouTube Data API Key"
    3. Enter any text in both fields — confirm inputs are masked (shown as dots)
    4. Click the eye icon on each field — confirm text becomes visible
    5. Click "Save Keys" button — confirm success message appears
    6. Refresh the page (F5) — confirm keys are still populated
    7. Close the tab entirely, open a new tab to localhost:5173 — confirm keys are gone
    8. Try submitting with empty fields — confirm validation error messages appear
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. `npm run dev` shows API key configuration form
2. `npx tsc --noEmit` passes with zero errors
3. Both input fields are masked by default (password type)
4. Eye toggle reveals/hides key text
5. Keys persist across page refresh (sessionStorage)
6. Keys clear when browser tab closes
7. Form validation prevents empty submissions
8. All Phase 1 success criteria met:
   - User can input and save Anthropic API key (session-only) ✓
   - User can input and save YouTube Data API key (session-only) ✓
   - API keys are masked in the UI after entry ✓
   - Development environment runs locally with hot reload ✓
</verification>

<success_criteria>
- ApiKeysProvider wraps the app and provides context to all children
- useApiKeys() hook returns keys, setKeys, clearKeys, hasKeys
- Form validates both fields as required before submission
- Input fields use type="password" with show/hide toggle
- sessionStorage persists keys across page refresh
- TypeScript compiles without errors
- All CONF-01, CONF-02, CONF-03 requirements fulfilled
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-configuration/01-02-SUMMARY.md`
</output>
